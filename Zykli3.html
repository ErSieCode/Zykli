<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MeinZyklus - Tracking App</title>
    <style>
        :root {
            --primary-color: #ff6b6b;
            --primary-light: #ffb8b8;
            --primary-dark: #e74c4c;
            --secondary-color: #ff9e7d;
            --tertiary-color: #ffcc8e;
            --fertile-color: #ffc076;
            --bg-color: #fff5f5;
            --text-color: #333;
            --border-radius: 12px;
            --box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        .app-title {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-weight: bold;
            font-size: 2.2rem;
        }

        .app-version {
            font-size: 0.8rem;
            color: #666;
            margin-bottom: 10px;
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background-color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            border-bottom: 3px solid var(--primary-color);
            font-weight: bold;
        }

        .tab:hover {
            background-color: #f9f9f9;
        }

        .tab-content {
            display: none;
            background: white;
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            animation: fadeIn 0.5s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .cycle-status {
            text-align: center;
            margin-bottom: 30px;
            padding: 15px;
            border-radius: var(--border-radius);
            background-color: white;
            box-shadow: var(--box-shadow);
        }

        .cycle-wheel {
            width: 220px;
            height: 220px;
            border-radius: 50%;
            margin: 0 auto 20px;
            position: relative;
            background-color: #f1f1f1;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .cycle-ring {
            position: absolute;
            width: 220px;
            height: 220px;
            border-radius: 50%;
            border: 30px solid #e0e0e0;
        }

        .cycle-segment {
            position: absolute;
            width: 220px;
            height: 220px;
            border-radius: 50%;
            clip: rect(0, 220px, 220px, 110px);
        }

        .cycle-segment-inner {
            position: absolute;
            width: 220px;
            height: 220px;
            border-radius: 50%;
            clip: rect(0, 110px, 220px, 0);
            transform: rotate(var(--rotation));
            border: 30px solid var(--segment-color);
        }

        .phase-indicator {
            width: 150px;
            height: 150px;
            background-color: white;
            border-radius: 50%;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 10px;
            z-index: 2;
        }

        .phase-indicator h2 {
            color: var(--primary-color);
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .phase-indicator p {
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .countdown {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary-dark);
        }

        .prediction-info {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: var(--border-radius);
            margin-top: 15px;
        }

        .button-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
            box-shadow: var(--box-shadow);
            white-space: nowrap;
        }

        button:hover {
            background-color: #ff5252;
        }

        button.secondary {
            background-color: #6c757d;
        }

        button.secondary:hover {
            background-color: #5a6268;
        }

        button.success {
            background-color: #28a745;
        }

        button.success:hover {
            background-color: #218838;
        }

        /* Daily Quest Grid */
        .daily-quest {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .quest-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            margin-bottom: 15px;
        }

        .quest-header h3 {
            margin: 0;
        }

        .quest-date {
            font-weight: bold;
        }

        .quest-day {
            color: #666;
        }

        .quest-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            cursor: pointer;
            padding: 15px 10px;
            border-radius: var(--border-radius);
            transition: all 0.3s ease;
            background-color: #f8f8f8;
        }

        .quest-item:hover {
            transform: translateY(-3px);
            box-shadow: var(--box-shadow);
        }

        .quest-icon {
            font-size: 2rem;
            margin-bottom: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .icon-period {
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .icon-temperature {
            color: #ff9500;
            border: 2px solid #ff9500;
        }

        .icon-mucus {
            color: #00b4d8;
            border: 2px solid #00b4d8;
        }

        .icon-cervix {
            color: #9d4edd;
            border: 2px solid #9d4edd;
        }

        .icon-intercourse {
            color: #ff66c4;
            border: 2px solid #ff66c4;
        }

        .icon-supplements {
            color: #0ead69;
            border: 2px solid #0ead69;
        }

        .icon-meds {
            color: #ff7b00;
            border: 2px solid #ff7b00;
        }

        .icon-mood {
            color: #4361ee;
            border: 2px solid #4361ee;
        }

        .icon-pain {
            color: #ef476f;
            border: 2px solid #ef476f;
        }

        .icon-weight {
            color: #118ab2;
            border: 2px solid #118ab2;
        }

        .icon-notes {
            color: #073b4c;
            border: 2px solid #073b4c;
        }

        .icon-breast {
            color: #ff758f;
            border: 2px solid #ff758f;
        }

        .icon-settings {
            color: #6c757d;
            border: 2px solid #6c757d;
        }

        .icon-add {
            color: #28a745;
            border: 2px solid #28a745;
        }

        .icon-custom {
            color: #9c27b0;
            border: 2px solid #9c27b0;
        }

        .quest-label {
            font-size: 0.85rem;
        }

        .form-dialog {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s;
        }

        .dialog-content {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 20px;
        }

        .dialog-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .dialog-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin: 0;
        }

        .dialog-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
            padding: 0;
            box-shadow: none;
        }

        .dialog-close:hover {
            color: #333;
        }

        form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        label {
            font-weight: bold;
        }

        .radio-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        input[type="date"],
        textarea,
        input[type="number"],
        input[type="time"],
        input[type="text"] {
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ddd;
        }

        select {
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ddd;
            background-color: white;
        }

        .symptom-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .symptom-option {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .calendar {
            margin-top: 20px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .calendar-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .calendar-tools {
            display: flex;
            gap: 10px;
        }

        .calendar-tool {
            font-size: 1.2rem;
            background: none;
            border: none;
            cursor: pointer;
            color: #666;
            padding: 5px;
            box-shadow: none;
        }

        .calendar-tool:hover {
            color: var(--primary-color);
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: #f9f9f9;
            border-radius: 8px;
            font-size: 0.9rem;
            position: relative;
            cursor: pointer;
            padding: 5px;
            min-height: 40px;
        }

        .calendar-day:hover {
            background-color: #f1f1f1;
        }

        .calendar-day.period {
            background-color: var(--primary-color);
            color: white;
        }

        .calendar-day.fertile {
            background-color: var(--tertiary-color);
        }

        .calendar-day.ovulation {
            background-color: var(--secondary-color);
            color: white;
        }

        .calendar-day-header {
            text-align: center;
            font-weight: bold;
            padding: 5px 0;
        }

        .day-indicator {
            position: absolute;
            top: 2px;
            right: 2px;
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        .day-symbol {
            font-size: 0.7rem;
            margin-top: 2px;
        }

        .symptom-indicator {
            background-color: #6c63ff;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background-color: white;
            padding: 15px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        .stat-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .data-management {
            margin-top: 20px;
        }

        .error-message {
            color: red;
            margin-top: 5px;
            font-size: 0.9rem;
        }

        .success-message {
            color: green;
            margin-top: 5px;
            font-size: 0.9rem;
        }

        .hidden {
            display: none;
        }

        .notification-banner {
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: var(--border-radius);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notification-banner button {
            background-color: transparent;
            color: #856404;
            border: 1px solid #856404;
            padding: 5px 10px;
            font-size: 0.8rem;
            box-shadow: none;
        }

        .notification-banner button:hover {
            background-color: #856404;
            color: white;
        }

        .backup-card {
            background-color: white;
            padding: 20px;
            border-radius: var(--border-radius);
            margin-top: 20px;
            box-shadow: var(--box-shadow);
        }

        .backup-history {
            margin-top: 15px;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #f0f0f0;
            border-radius: 8px;
            padding: 10px;
        }

        .backup-item {
            padding: 10px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .backup-item:last-child {
            border-bottom: none;
        }

        .backup-date {
            font-weight: bold;
        }

        .backup-item button {
            padding: 5px 10px;
            font-size: 0.8rem;
        }

        .tab-content-section {
            margin-bottom: 25px;
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 25px;
        }

        .tab-content-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .section-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .switch-container {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
            margin-right: 10px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary-color);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        /* Chart styles */
        .chart-container {
            height: 300px;
            margin: 20px 0;
            position: relative;
        }

        .export-options {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .badge {
            display: inline-block;
            padding: 3px 8px;
            font-size: 0.8em;
            font-weight: bold;
            border-radius: 10px;
            background-color: #e9ecef;
            color: #495057;
            margin-left: 5px;
        }

        .badge-auto {
            background-color: #17a2b8;
            color: white;
        }

        .badge-manual {
            background-color: #6c757d;
            color: white;
        }

        .info-text {
            margin-top: 10px;
            font-size: 0.9em;
            color: #6c757d;
        }

        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        table th, table td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        table th {
            background-color: #f8f9fa;
        }

        .pagination {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .pagination button {
            padding: 5px 10px;
        }

        /* Benutzerdefinierte Parameter Styles */
        .custom-parameters-container {
            margin-top: 20px;
        }

        .custom-parameter-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin-bottom: 10px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #9c27b0;
        }

        .custom-parameter-name {
            font-weight: bold;
        }

        .custom-parameter-type {
            color: #666;
            font-size: 0.9em;
        }

        .custom-parameter-actions {
            display: flex;
            gap: 5px;
        }

        .custom-parameter-actions button {
            padding: 5px 10px;
            font-size: 0.8rem;
        }

        .parameter-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 10px;
            margin-bottom: 5px;
            background-color: #f1f1f1;
            border-radius: 5px;
        }

        .parameter-option button {
            padding: 2px 8px;
            font-size: 0.7rem;
        }

        .option-list {
            margin-top: 10px;
            max-height: 200px;
            overflow-y: auto;
            padding: 5px;
            border: 1px solid #eee;
            border-radius: 5px;
        }

        /* Interactive Parameter Control Styles */
        .interactive-control {
            width: 100%;
            margin: 10px 0;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 10px;
            position: relative;
        }

        /* Menstruations-Regler mit Blutstropfen */
        .blood-drop-slider {
            position: relative;
            height: 60px;
            padding: 15px 0;
        }

        .blood-drop-slider .slider-track {
            width: 100%;
            height: 10px;
            background: linear-gradient(to right, #ffebee, #ffcdd2, #ef9a9a, #e57373, #ef5350, #e53935, #c62828, #b71c1c);
            border-radius: 5px;
        }

        .blood-drop-slider .slider-thumb {
            position: absolute;
            top: -5px;
            width: 30px;
            height: 30px;
            background-color: white;
            border: 2px solid #e53935;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
            transition: transform 0.2s;
        }

        .blood-drop-slider .slider-thumb:hover {
            transform: scale(1.1);
        }

        .blood-drop-slider .slider-value {
            position: absolute;
            top: -25px;
            transform: translateX(-50%);
            background-color: #e53935;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
        }

        .blood-drop-animation {
            position: absolute;
            top: 40px;
            left: 50%;
            transform: translateX(-50%);
            width: 40px;
            height: 40px;
        }

        /* Vulva-Thermometer Styles */
        .vulva-thermometer {
            position: relative;
            width: 100%;
            height: 60px;
            margin: 20px 0;
        }

        .vulva-shape {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 40px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 50"><path d="M10,25 C20,0 40,0 50,15 C60,0 80,0 90,25 C80,40 60,45 50,35 C40,45 20,40 10,25 Z" fill="%23ffcdd2" stroke="%23e57373" stroke-width="2"/></svg>');
            background-repeat: no-repeat;
            background-position: center;
            background-size: contain;
            opacity: 0.7;
        }

        .temp-slider {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
        }

        .temp-value {
            position: absolute;
            bottom: -25px;
            right: 0;
            font-weight: bold;
            color: #ff9500;
        }

        /* Konfetti Animation */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1001;
            pointer-events: none;
            overflow: hidden;
            display: none;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f44336;
            opacity: 0;
            animation: confetti-fall 5s ease-in-out forwards;
        }

        @keyframes confetti-fall {
            0% {
                opacity: 1;
                top: -10px;
                transform: translateX(0) rotate(0deg);
            }
            100% {
                opacity: 0;
                top: 100%;
                transform: translateX(100px) rotate(720deg);
            }
        }

        /* Smiley mit einstellbarem Mund */
        .mood-smiley {
            position: relative;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background-color: #ffeb3b;
            margin: 20px auto;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .eye {
            position: absolute;
            width: 15px;
            height: 15px;
            background-color: #333;
            border-radius: 50%;
            top: 40px;
        }

        .eye.left {
            left: 35px;
        }

        .eye.right {
            right: 35px;
        }

        .mouth {
            position: absolute;
            width: 70px;
            height: 30px;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%);
            overflow: hidden;
        }

        .mouth-shape {
            position: absolute;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: 5px solid #333;
            border-color: transparent transparent #333 transparent;
            box-sizing: border-box;
            transform: rotate(0deg);
            transition: transform 0.3s;
        }

        .mood-slider {
            width: 100%;
            margin-top: 10px;
        }

        .mood-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
        }

        .mood-labels span {
            font-size: 0.8em;
        }

        /* Hasen mit Stift Animation */
        .rabbit-animation {
            width: 60px;
            height: 60px;
            margin: 10px auto;
            position: relative;
        }

        .rabbit {
            position: absolute;
            width: 40px;
            height: 40px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="70" r="30" fill="white" stroke="black" stroke-width="2"/><circle cx="40" cy="60" r="5" fill="black"/><circle cx="60" cy="60" r="5" fill="black"/><path d="M35,40 Q50,20 65,40" fill="none" stroke="black" stroke-width="2"/><path d="M45,80 L55,80" fill="none" stroke="black" stroke-width="2"/><path d="M20,10 Q30,30 40,40" fill="none" stroke="black" stroke-width="2"/><path d="M80,10 Q70,30 60,40" fill="none" stroke="black" stroke-width="2"/></svg>');
            background-repeat: no-repeat;
            background-size: contain;
            animation: rabbit-write 3s infinite;
        }

        .pencil {
            position: absolute;
            width: 20px;
            height: 20px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M30,90 L10,70 L60,20 L80,40 Z" fill="yellow" stroke="black" stroke-width="2"/><path d="M80,40 L90,30 L70,10 L60,20 Z" fill="pink" stroke="black" stroke-width="2"/><path d="M10,70 L5,95 L30,90 Z" fill="brown" stroke="black" stroke-width="2"/></svg>');
            background-repeat: no-repeat;
            background-size: contain;
            right: 0;
            bottom: 0;
            animation: pencil-write 3s infinite;
        }

        @keyframes rabbit-write {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(2px, -2px) rotate(2deg); }
            50% { transform: translate(0, 0) rotate(0deg); }
            75% { transform: translate(-2px, -2px) rotate(-2deg); }
        }

        @keyframes pencil-write {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(5px, 2px) rotate(10deg); }
            50% { transform: translate(2px, 5px) rotate(0deg); }
            75% { transform: translate(-2px, 3px) rotate(-10deg); }
        }

        /* Kopfschmerz-Animation mit Ballon und Specht */
        .headache-animation {
            position: relative;
            width: 100px;
            height: 120px;
            margin: 0 auto;
        }

        .balloon-head {
            position: absolute;
            width: 70px;
            height: 100px;
            background-color: #ffcdd2;
            border-radius: 50%;
            left: 10px;
            top: 10px;
        }

        .woodpecker {
            position: absolute;
            width: 40px;
            height: 40px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M20,50 Q30,20 50,20 Q70,20 80,50" fill="green"/><circle cx="50" cy="30" r="15" fill="red"/><path d="M50,30 L40,60" fill="none" stroke="black" stroke-width="2"/><path d="M50,90 L40,60" fill="none" stroke="black" stroke-width="2"/><path d="M65,40 L95,30" fill="none" stroke="black" stroke-width="4" stroke-linecap="round"/></svg>');
            background-repeat: no-repeat;
            background-size: contain;
            right: 0;
            top: 0;
            transform-origin: 0% 100%;
            animation: woodpecker-peck 1s infinite;
        }

        @keyframes woodpecker-peck {
            0%, 10%, 90%, 100% { transform: rotate(0deg); }
            45%, 55% { transform: rotate(-30deg); }
        }

        .headache-slider {
            width: 100%;
            margin-top: 10px;
        }

        .headache-value {
            text-align: center;
            font-weight: bold;
            margin-top: 5px;
        }

        /* Grocery List Styles */
        .grocery-list {
            max-height: 150px;
            overflow-y: auto;
            margin-top: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
        }

        .grocery-item {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }

        .grocery-item:last-child {
            border-bottom: none;
        }

        .grocery-input-container {
            display: flex;
            margin-top: 10px;
            gap: 10px;
        }

        .grocery-input-container input {
            flex: 1;
        }

        /* Zervixschleim-Auswahl */
        .mucus-options {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }

        .mucus-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            transition: background-color 0.3s;
        }

        .mucus-option:hover, .mucus-option.selected {
            background-color: #e3f2fd;
        }

        .mucus-icon {
            width: 30px;
            height: 30px;
            margin-bottom: 5px;
            border-radius: 50%;
        }

        .mucus-dry {
            background-color: #f5f5f5;
        }

        .mucus-sticky {
            background-color: #fff9c4;
        }

        .mucus-creamy {
            background-color: #fff8e1;
        }

        .mucus-watery {
            background-color: #e1f5fe;
        }

        .mucus-egg-white {
            background-color: #f1f8e9;
            background-image: linear-gradient(45deg, #f1f8e9 25%, transparent 25%, transparent 50%, #f1f8e9 50%, #f1f8e9 75%, transparent 75%, transparent);
            background-size: 10px 10px;
        }

        .mucus-label {
            font-size: 0.8em;
            text-align: center;
        }

        /* Mobile Anpassungen */
        @media (max-width: 600px) {
            .daily-quest {
                grid-template-columns: repeat(2, 1fr);
            }

            .symptom-grid {
                grid-template-columns: 1fr;
            }

            .stats-container {
                grid-template-columns: 1fr;
            }

            .button-container {
                flex-direction: column;
                align-items: center;
            }

            button {
                width: 100%;
            }

            .export-options {
                flex-direction: column;
            }

            .mucus-options {
                flex-wrap: wrap;
            }

            .mucus-option {
                width: 30%;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1 class="app-title">MeinZyklus</h1>
        <div class="app-version">Version 1.5.0</div>
        <p>Zyklustracking-App mit s√º√üem Design und interaktiven Funktionen</p>
    </header>

    <div id="notificationBanner" class="notification-banner hidden">
        <span id="notificationText">Benachrichtigung</span>
        <button id="notificationClose">Schlie√üen</button>
    </div>

    <div class="cycle-status">
        <div class="cycle-wheel" id="cycleWheel">
            <div class="cycle-ring" id="cycleRing"></div>
            <div class="phase-indicator" id="phaseIndicator">
                <h2 id="cycleDay">Tag --</h2>
                <p id="cyclePhase">--</p>
                <div class="countdown">
                    <span id="nextPeriod">--</span> Tage bis zur n√§chsten Periode
                </div>
            </div>
        </div>
    </div>

    <div class="tabs">
        <div class="tab active" data-tab="heute">Heute</div>
        <div class="tab" data-tab="kalender">Kalender</div>
        <div class="tab" data-tab="statistik">Statistik</div>
        <div class="tab" data-tab="einstellungen">Einstellungen</div>
    </div>

    <div class="tab-content active" id="heute">
        <div class="quest-header">
            <div>
                <h3>T√§gliche Quest</h3>
                <div>
                    <span class="quest-date" id="questDate">22. M√§rz 2025</span>
                    <span class="quest-day" id="questDay">Samstag</span>
                </div>
            </div>
            <button id="prevDay">‚Üê</button>
            <button id="nextDay">‚Üí</button>
        </div>

        <div class="daily-quest" id="dailyQuestContainer">
            <div class="quest-item" data-type="period">
                <div class="quest-icon icon-period">ü©∏</div>
                <div class="quest-label">Menstruation</div>
            </div>
            <div class="quest-item" data-type="temperature">
                <div class="quest-icon icon-temperature">üå°Ô∏è</div>
                <div class="quest-label">Temperatur</div>
            </div>
            <div class="quest-item" data-type="mucus">
                <div class="quest-icon icon-mucus">üíß</div>
                <div class="quest-label">Schleim</div>
            </div>
            <div class="quest-item" data-type="cervix">
                <div class="quest-icon icon-cervix">‚≠ï</div>
                <div class="quest-label">Geb√§rmutterhals</div>
            </div>
            <div class="quest-item" data-type="intercourse">
                <div class="quest-icon icon-intercourse">üíú</div>
                <div class="quest-label">Geschlechtsv.</div>
            </div>
            <div class="quest-item" data-type="supplements">
                <div class="quest-icon icon-supplements">üåø</div>
                <div class="quest-label">Nahrungserg.</div>
            </div>
            <div class="quest-item" data-type="medication">
                <div class="quest-icon icon-meds">üíä</div>
                <div class="quest-label">Medikamente</div>
            </div>
            <div class="quest-item" data-type="mood">
                <div class="quest-icon icon-mood">üòä</div>
                <div class="quest-label">Stimmung</div>
            </div>
            <div class="quest-item" data-type="pain">
                <div class="quest-icon icon-pain">ü§ï</div>
                <div class="quest-label">Kopfschmerzen</div>
            </div>
            <div class="quest-item" data-type="weight">
                <div class="quest-icon icon-weight">‚öñÔ∏è</div>
                <div class="quest-label">Gewicht</div>
            </div>
            <div class="quest-item" data-type="notes">
                <div class="quest-icon icon-notes">üìù</div>
                <div class="quest-label">Notizen</div>
            </div>
            <div class="quest-item" data-type="breast">
                <div class="quest-icon icon-breast">üëö</div>
                <div class="quest-label">Brustgef√ºhl</div>
            </div>
        </div>
    </div>

    <div class="tab-content" id="kalender">
        <div class="calendar-header">
            <div class="calendar-title">
                <button id="prevMonth">‚Üê</button>
                <h3 id="currentMonth">M√§rz 2025</h3>
                <button id="nextMonth">‚Üí</button>
            </div>
            <div class="calendar-tools">
                <button class="calendar-tool" id="calendarSearch">üîç</button>
                <button class="calendar-tool" id="calendarSettings">‚öôÔ∏è</button>
            </div>
        </div>
        <div class="calendar-day-header">
            <div class="calendar-grid">
                <div>Mo</div>
                <div>Di</div>
                <div>Mi</div>
                <div>Do</div>
                <div>Fr</div>
                <div>Sa</div>
                <div>So</div>
            </div>
        </div>
        <div class="calendar-grid" id="calendarGrid">
            <!-- Kalendertage werden per JavaScript eingef√ºgt -->
        </div>

        <div style="margin-top: 15px;">
            <h4>Legende:</h4>
            <div style="display: flex; flex-wrap: wrap; gap: 15px; margin-top: 10px;">
                <div style="display: flex; align-items: center;">
                    <span style="color: var(--primary-color); margin-right: 5px;">ü©∏‚ÇÅ</span>
                    <span>Spotting</span>
                </div>
                <div style="display: flex; align-items: center;">
                    <span style="color: var(--primary-color); margin-right: 5px;">ü©∏‚ÇÇ</span>
                    <span>Leicht</span>
                </div>
                <div style="display: flex; align-items: center;">
                    <span style="color: var(--primary-color); margin-right: 5px;">ü©∏‚ÇÉ</span>
                    <span>Mittel</span>
                </div>
                <div style="display: flex; align-items: center;">
                    <span style="color: var(--primary-color); margin-right: 5px;">ü©∏‚ÇÑ</span>
                    <span>Stark</span>
                </div>
                <div style="display: flex; align-items: center;">
                    <span style="color: var(--tertiary-color); margin-right: 5px;">üü†</span>
                    <span>Fruchtbare Tage</span>
                </div>
                <div style="display: flex; align-items: center;">
                    <span style="margin-right: 5px;">üåº</span>
                    <span>Eisprung</span>
                </div>
                <div style="display: flex; align-items: center;">
                    <span style="margin-right: 5px;">üåô</span>
                    <span>Mondphase</span>
                </div>
                <div style="display: flex; align-items: center;">
                    <span style="color: #ff66c4; margin-right: 5px;">üíú</span>
                    <span>Geschlechtsverkehr</span>
                </div>
            </div>
        </div>
    </div>

    <div class="tab-content" id="statistik">
        <h2>Zyklusstatistik</h2>
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-title">Durchschnittliche Zyklusl√§nge</div>
                <div id="avgCycleLength">-- Tage</div>
            </div>
            <div class="stat-card">
                <div class="stat-title">Durchschnittliche Periodenl√§nge</div>
                <div id="avgPeriodLength">-- Tage</div>
            </div>
            <div class="stat-card">
                <div class="stat-title">H√§ufigste Symptome</div>
                <div id="topSymptoms">--</div>
            </div>
            <div class="stat-card">
                <div class="stat-title">Letzte Zyklen</div>
                <div id="recentCycles">--</div>
            </div>
        </div>

        <div id="customParametersStats">
            <!-- Hier werden die Statistiken f√ºr benutzerdefinierte Parameter eingef√ºgt -->
        </div>

        <div class="table-container">
            <h3 class="section-title">Eintrags√ºbersicht</h3>
            <table id="entriesTable">
                <thead>
                    <tr>
                        <th>Datum</th>
                        <th>Periode</th>
                        <th>Temperatur</th>
                        <th>Symptome</th>
                        <th>Benutzerdefiniert</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Tabellendaten werden per JavaScript eingef√ºgt -->
                </tbody>
            </table>
            <div class="pagination" id="entriesPagination">
                <!-- Paginierung wird per JavaScript eingef√ºgt -->
            </div>
        </div>
    </div>

    <div class="tab-content" id="einstellungen">
        <h2>Einstellungen & Daten</h2>

        <!-- Bereich f√ºr benutzerdefinierte Parameter -->
        <div class="tab-content-section">
            <h3 class="section-title">Benutzerdefinierte Parameter</h3>
            <p>Erstelle eigene Parameter, die du t√§glich tracken m√∂chtest:</p>

            <div class="custom-parameters-container" id="customParametersContainer">
                <!-- Hier werden die benutzerdefinierten Parameter angezeigt -->
                <div class="info-text" id="noCustomParametersInfo">Keine benutzerdefinierten Parameter vorhanden. Klicke auf 'Neuer Parameter', um einen zu erstellen.</div>
            </div>

            <div class="button-container">
                <button id="newCustomParameter">Neuer Parameter</button>
            </div>
        </div>

        <div class="tab-content-section">
            <h3 class="section-title">Automatisches Backup</h3>
            <div class="switch-container">
                <label class="switch">
                    <input type="checkbox" id="autoBackupEnabled" checked>
                    <span class="slider"></span>
                </label>
                <span>Automatisches Backup aktivieren</span>
            </div>

            <div class="form-group">
                <label>Backup-Intervall (in Tagen):</label>
                <input type="number" id="backupInterval" min="1" max="90" value="7">
            </div>

            <div class="form-group">
                <label>Maximale Anzahl von Backups:</label>
                <input type="number" id="maxBackupsCount" min="5" max="100" value="30">
                <p class="info-text">H√∂here Werte erm√∂glichen mehr Historie, nutzen aber mehr Speicherplatz.</p>
            </div>
        </div>

        <div class="tab-content-section">
            <h3 class="section-title">Backup-Historie</h3>
            <div class="backup-history" id="backupHistory">
                <!-- Backup-Historie wird per JavaScript eingef√ºgt -->
                <div class="backup-item">
                    <span class="backup-date">Keine Backups vorhanden</span>
                </div>
            </div>
            <div class="button-container">
                <button id="createBackup">Manuelles Backup erstellen</button>
            </div>
        </div>

        <div class="tab-content-section">
            <h3 class="section-title">Datenexport</h3>
            <p>Exportiere deine Daten f√ºr externe Sicherung oder √úbertragung auf ein anderes Ger√§t:</p>
            <div class="export-options">
                <button id="exportDataJson">Als JSON exportieren</button>
                <button id="exportDataCsv">Als CSV exportieren</button>
            </div>
        </div>

        <div class="tab-content-section">
            <h3 class="section-title">Datenimport</h3>
            <p>Lade eine zuvor exportierte Datei (JSON oder CSV):</p>
            <div class="form-group">
                <input type="file" id="importFile" accept=".json,.csv">
                <div class="button-container">
                    <button id="importData">Daten importieren</button>
                </div>
                <div id="importMessage" class="hidden"></div>
            </div>
            <p class="info-text">
                <strong>Hinweis:</strong> Browser k√∂nnen aus Sicherheitsgr√ºnden nicht direkt auf den "Zykli"-Ordner
                zugreifen. Bitte navigiere manuell zu diesem Ordner, wenn du die Dateiauswahl √∂ffnest.
            </p>
        </div>

        <div class="tab-content-section">
            <h3 class="section-title">Daten zur√ºcksetzen</h3>
            <p>Vorsicht: Diese Aktion kann nicht r√ºckg√§ngig gemacht werden!</p>
            <div class="button-container">
                <button id="resetData">Alle Daten l√∂schen</button>
            </div>
        </div>
    </div>

    <!-- Neue interaktive Eingabeformulare -->
    <div class="form-dialog" id="periodDialog">
        <div class="dialog-content">
            <div class="dialog-header">
                <h3 class="dialog-title">Menstruation</h3>
                <button class="dialog-close">&times;</button>
            </div>
            <div class="interactive-control">
                <label>St√§rke der Menstruation:</label>
                <div class="blood-drop-slider">
                    <div class="slider-track"></div>
                    <div class="slider-thumb" id="periodSliderThumb"></div>
                    <div class="slider-value" id="periodValue">0</div>
                    <div class="blood-drop-animation" id="bloodDropAnimation">
                        <svg width="40" height="40" viewBox="0 0 40 40">
                            <path id="bloodDrop" d="M20,0 C20,0 10,20 10,30 C10,35.5 14.5,40 20,40 C25.5,40 30,35.5 30,30 C30,20 20,0 20,0 Z" fill="#ffcdd2" />
                        </svg>
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 10px;">
                    <span>Keine</span>
                    <span>Stark</span>
                </div>
                <div class="button-container">
                    <button type="button" id="savePeriodBtn">Speichern</button>
                </div>
            </div>
        </div>
    </div>

    <div class="form-dialog" id="temperatureDialog">
        <div class="dialog-content">
            <div class="dialog-header">
                <h3 class="dialog-title">Basaltemperatur</h3>
                <button class="dialog-close">&times;</button>
            </div>
            <div class="interactive-control">
                <label>K√∂rpertemperatur in ¬∞C:</label>
                <div class="vulva-thermometer">
                    <div class="vulva-shape"></div>
                    <input type="range" class="temp-slider" id="temperatureSlider" min="35.0" max="41.0" step="0.1" value="36.5">
                    <div class="temp-value" id="temperatureValue">36.5 ¬∞C</div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 30px;">
                    <span>35.0 ¬∞C</span>
                    <span>41.0 ¬∞C</span>
                </div>
                <div class="button-container">
                    <button type="button" id="saveTemperatureBtn">Speichern</button>
                </div>
            </div>
        </div>
    </div>

    <div class="form-dialog" id="intercourseDialog">
        <div class="dialog-content">
            <div class="dialog-header">
                <h3 class="dialog-title">Geschlechtsverkehr</h3>
                <button class="dialog-close">&times;</button>
            </div>
            <div class="interactive-control">
                <label>Hast du heute Geschlechtsverkehr gehabt?</label>
                <div style="display: flex; justify-content: center; gap: 20px; margin: 20px 0;">
                    <button type="button" id="intercourseYesBtn" style="padding: 15px 30px;">Ja</button>
                    <button type="button" id="intercourseNoBtn" class="secondary" style="padding: 15px 30px;">Nein</button>
                </div>
            </div>
        </div>
    </div>

    <div class="form-dialog" id="medicationDialog">
        <div class="dialog-content">
            <div class="dialog-header">
                <h3 class="dialog-title">Medikamente</h3>
                <button class="dialog-close">&times;</button>
            </div>
            <div class="interactive-control">
                <label>Welche Medikamente hast du heute genommen?</label>
                <textarea id="medicationText" rows="4" placeholder="z.B. Ibuprofen 400mg, Fols√§ure 400Œºg"></textarea>
                <div class="button-container">
                    <button type="button" id="saveMedicationBtn">Speichern</button>
                </div>
            </div>
        </div>
    </div>

    <div class="form-dialog" id="weightDialog">
        <div class="dialog-content">
            <div class="dialog-header">
                <h3 class="dialog-title">Gewicht</h3>
                <button class="dialog-close">&times;</button>
            </div>
            <div class="interactive-control">
                <label>Dein aktuelles Gewicht in kg:</label>
                <input type="number" id="weightInput" min="30" max="200" step="0.1" placeholder="Gewicht in kg">
                <div class="button-container">
                    <button type="button" id="saveWeightBtn">Speichern</button>
                </div>
            </div>
        </div>
    </div>

    <div class="form-dialog" id="moodDialog">
        <div class="dialog-content">
            <div class="dialog-header">
                <h3 class="dialog-title">Stimmung</h3>
                <button class="dialog-close">&times;</button>
            </div>
            <div class="interactive-control">
                <label>Wie ist deine Stimmung heute?</label>
                <div class="mood-smiley">
                    <div class="eye left"></div>
                    <div class="eye right"></div>
                    <div class="mouth">
                        <div class="mouth-shape" id="mouthShape"></div>
                    </div>
                </div>
                <input type="range" class="mood-slider" id="moodSlider" min="0" max="9" step="1" value="5">
                <div class="mood-labels">
                    <span>Sehr traurig</span>
                    <span>Super</span>
                </div>
                <div class="button-container">
                    <button type="button" id="saveMoodBtn">Speichern</button>
                </div>
            </div>
        </div>
    </div>

    <div class="form-dialog" id="notesDialog">
        <div class="dialog-content">
            <div class="dialog-header">
                <h3 class="dialog-title">Tagebuch</h3>
                <button class="dialog-close">&times;</button>
            </div>
            <div class="interactive-control">
                <div class="rabbit-animation">
                    <div class="rabbit"></div>
                    <div class="pencil"></div>
                </div>
                <label>Deine Notizen f√ºr heute:</label>
                <textarea id="notesText" rows="6" placeholder="Schreibe hier deine Gedanken und Erlebnisse auf..."></textarea>
                <div class="button-container">
                    <button type="button" id="saveNotesBtn">Speichern</button>
                </div>
            </div>
        </div>
    </div>

    <div class="form-dialog" id="mucusDialog">
        <div class="dialog-content">
            <div class="dialog-header">
                <h3 class="dialog-title">Zervixschleim</h3>
                <button class="dialog-close">&times;</button>
            </div>
            <div class="interactive-control">
                <label>Welche Viskosit√§t hat dein Zervixschleim heute?</label>
                <div class="mucus-options">
                    <div class="mucus-option" data-value="DRY">
                        <div class="mucus-icon mucus-dry"></div>
                        <span class="mucus-label">Trocken</span>
                    </div>
                    <div class="mucus-option" data-value="STICKY">
                        <div class="mucus-icon mucus-sticky"></div>
                        <span class="mucus-label">Klebrig</span>
                    </div>
                    <div class="mucus-option" data-value="CREAMY">
                        <div class="mucus-icon mucus-creamy"></div>
                        <span class="mucus-label">Cremig</span>
                    </div>
                    <div class="mucus-option" data-value="WATERY">
                        <div class="mucus-icon mucus-watery"></div>
                        <span class="mucus-label">W√§ssrig</span>
                    </div>
                    <div class="mucus-option" data-value="EGG_WHITE">
                        <div class="mucus-icon mucus-egg-white"></div>
                        <span class="mucus-label">Spinnbar</span>
                    </div>
                </div>
                <div class="button-container" style="margin-top: 20px;">
                    <button type="button" id="saveMucusBtn">Speichern</button>
                </div>
            </div>
        </div>
    </div>

    <div class="form-dialog" id="painDialog">
        <div class="dialog-content">
            <div class="dialog-header">
                <h3 class="dialog-title">Kopfschmerzen</h3>
                <button class="dialog-close">&times;</button>
            </div>
            <div class="interactive-control">
                <label>Wie stark sind deine Kopfschmerzen heute?</label>
                <div class="headache-animation">
                    <div class="balloon-head"></div>
                    <div class="woodpecker" id="woodpecker"></div>
                </div>
                <input type="range" class="headache-slider" id="headacheSlider" min="0" max="10" value="0">
                <div class="headache-value" id="headacheValue">0 - Keine Schmerzen</div>
                <div class="button-container">
                    <button type="button" id="savePainBtn">Speichern</button>
                </div>
            </div>
        </div>
    </div>

    <div class="form-dialog" id="supplementsDialog">
        <div class="dialog-content">
            <div class="dialog-header">
                <h3 class="dialog-title">Nahrungserg√§nzungsmittel</h3>
                <button class="dialog-close">&times;</button>
            </div>
            <div class="interactive-control">
                <label>Welche Nahrungserg√§nzungsmittel hast du heute genommen?</label>
                <div class="grocery-input-container">
                    <input type="text" id="supplementInput" placeholder="Neues Nahrungserg√§nzungsmittel">
                    <button type="button" id="addSupplementBtn" class="secondary">Hinzuf√ºgen</button>
                </div>
                <div class="grocery-list" id="supplementsList">
                    <!-- Liste wird per JavaScript gef√ºllt -->
                </div>
                <div class="button-container">
                    <button type="button" id="saveSupplementsBtn">Speichern</button>
                </div>
            </div>
        </div>
    </div>

    <div class="form-dialog" id="breastDialog">
        <div class="dialog-content">
            <div class="dialog-header">
                <h3 class="dialog-title">Brustgef√ºhl</h3>
                <button class="dialog-close">&times;</button>
            </div>
            <div class="interactive-control">
                <label>Wie f√ºhlen sich deine Br√ºste heute an?</label>
                <div style="margin: 15px 0;">
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" name="breastFeeling" id="breast-none" value="NONE" checked>
                            <label for="breast-none">Keine Beschwerden</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="breastFeeling" id="breast-sensitive" value="SENSITIVE">
                            <label for="breast-sensitive">Empfindlich</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="breastFeeling" id="breast-tense" value="TENSE">
                            <label for="breast-tense">Spannt</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="breastFeeling" id="breast-painful" value="PAINFUL">
                            <label for="breast-painful">Schmerzt</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" name="breastFeeling" id="breast-very-painful" value="VERY_PAINFUL">
                            <label for="breast-very-painful">Sehr schmerzhaft</label>
                        </div>
                    </div>
                </div>
                <div class="button-container">
                    <button type="button" id="saveBreastBtn">Speichern</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Konfetti-Container -->
    <div class="confetti-container" id="confettiContainer"></div>

    <script>
        // Datenmodell und Speicherung
        const STORAGE_KEY = 'cycleTackingApp';
        const BACKUP_STORAGE_KEY = 'cycleTrackingAppBackups';
        const APP_VERSION = '1.5.0';

        // Initialisiere leeres Datenmodell
        let appData = {
            cycles: [],
            entries: [],
            settings: {
                cycleLength: 28, // Standardwert f√ºr Zyklusl√§nge
                periodLength: 5, // Standardwert f√ºr Periodenl√§nge
                autoBackup: {
                    enabled: true,
                    interval: 7, // Backup alle 7 Tage
                    lastBackup: null,
                    maxBackups: 30  // Maximal 30 Backups
                }
            },
            // Neue Eigenschaft f√ºr benutzerdefinierte Parameter
            customParameters: [],
            // Liste gespeicherter Nahrungserg√§nzungsmittel
            savedSupplements: [],
            version: APP_VERSION
        };

        // Backup-Historie
        let backupHistory = [];

        // Aktuelles Datum f√ºr die t√§gliche Quest
        let currentQuestDate = new Date();

        // Variable f√ºr den aktuell bearbeiteten Eintrag
        let currentEntry = null;

        // Lade gespeicherte Daten
        function loadData() {
            const savedData = localStorage.getItem(STORAGE_KEY);
            if (savedData) {
                try {
                    appData = JSON.parse(savedData);

                    // Stelle sicher, dass die Backup-Einstellungen existieren und vollst√§ndig sind
                    if (!appData.settings.autoBackup) {
                        appData.settings.autoBackup = {
                            enabled: true,
                            interval: 7,
                            lastBackup: null,
                            maxBackups: 30
                        };
                    } else if (!appData.settings.autoBackup.maxBackups) {
                        appData.settings.autoBackup.maxBackups = 30;
                    }

                    // Stelle sicher, dass das customParameters-Array existiert
                    if (!appData.customParameters) {
                        appData.customParameters = [];
                    }

                    // Stelle sicher, dass das savedSupplements-Array existiert
                    if (!appData.savedSupplements) {
                        appData.savedSupplements = [];
                    }

                    // F√ºge Versionsinformation hinzu, falls nicht vorhanden
                    if (!appData.version) {
                        appData.version = APP_VERSION;
                    }

                    // Pr√ºfe, ob ein App-Update stattgefunden hat
                    if (appData.version !== APP_VERSION) {
                        // Update-Benachrichtigung
                        showNotification(`Die App wurde auf Version ${APP_VERSION} aktualisiert. Neue Funktionen: Interaktive Parameter!`, 'info');
                        appData.version = APP_VERSION;
                        saveData();
                    }
                } catch (error) {
                    console.error('Fehler beim Laden der Daten:', error);
                    showNotification('Fehler beim Laden der Daten. Die App wurde zur√ºckgesetzt.', 'error');
                }
            }

            // Lade Backup-Historie
            const savedBackups = localStorage.getItem(BACKUP_STORAGE_KEY);
            if (savedBackups) {
                try {
                    backupHistory = JSON.parse(savedBackups);
                } catch (error) {
                    console.error('Fehler beim Laden der Backup-Historie:', error);
                    backupHistory = [];
                }
            }
        }

        // Speichere Daten im localStorage
        function saveData() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(appData));

            // Pr√ºfe, ob ein automatisches Backup f√§llig ist
            checkAutoBackup();
        }

        // Speichere Backup-Historie
        function saveBackupHistory() {
            localStorage.setItem(BACKUP_STORAGE_KEY, JSON.stringify(backupHistory));
        }

        // Pr√ºfe, ob ein automatisches Backup erstellt werden soll
        function checkAutoBackup() {
            if (!appData.settings.autoBackup.enabled) {
                return;
            }

            const now = new Date();
            const lastBackup = appData.settings.autoBackup.lastBackup ? new Date(appData.settings.autoBackup.lastBackup) : null;

            // Wenn noch kein Backup erstellt wurde oder das letzte Backup √§lter als das Intervall ist
            if (!lastBackup || (now - lastBackup) >= (appData.settings.autoBackup.interval * 24 * 60 * 60 * 1000)) {
                createBackup(true);
            }
        }

        // Erstelle ein Backup
        function createBackup(isAuto = false) {
            const now = new Date();
            const backupId = `backup_${now.getTime()}`;
            const backupData = JSON.stringify(appData);

            // Speichere das Backup im localStorage
            try {
                localStorage.setItem(backupId, backupData);

                // Aktualisiere das Datum des letzten Backups
                appData.settings.autoBackup.lastBackup = now.toISOString();
                saveData();

                // F√ºge das Backup zur Historie hinzu
                backupHistory.unshift({
                    id: backupId,
                    date: now.toISOString(),
                    isAuto: isAuto
                });

                // Begrenze die Anzahl der Backups auf die max. Anzahl
                const maxBackups = appData.settings.autoBackup.maxBackups || 30;
                if (backupHistory.length > maxBackups) {
                    const oldestBackups = backupHistory.splice(maxBackups);
                    oldestBackups.forEach(backup => {
                        localStorage.removeItem(backup.id);
                    });
                }

                saveBackupHistory();
                updateBackupHistory();

                if (!isAuto) {
                    showNotification('Backup erfolgreich erstellt!', 'success');
                }
            } catch (error) {
                console.error('Fehler beim Erstellen des Backups:', error);

                // Pr√ºfe, ob der Fehler auf einen vollen localStorage zur√ºckzuf√ºhren ist
                if (error.name === 'QuotaExceededError' || error.code === 22) {
                    showNotification('Der Speicherplatz ist voll. L√∂sche √§ltere Backups, um Platz zu schaffen.', 'error');

                    // L√∂sche das √§lteste Backup, wenn die Historie voll ist
                    if (backupHistory.length > 0) {
                        const oldestBackup = backupHistory.pop();
                        localStorage.removeItem(oldestBackup.id);
                        saveBackupHistory();
                        updateBackupHistory();

                        // Versuche es erneut
                        createBackup(isAuto);
                    }
                } else {
                    showNotification('Fehler beim Erstellen des Backups.', 'error');
                }
            }
        }

        // Backup wiederherstellen
        function restoreBackup(backupId) {
            try {
                const backupData = localStorage.getItem(backupId);

                if (backupData) {
                    appData = JSON.parse(backupData);

                    // Stelle sicher, dass Backup-Einstellungen vorhanden sind
                    if (!appData.settings.autoBackup) {
                        appData.settings.autoBackup = {
                            enabled: true,
                            interval: 7,
                            lastBackup: null,
                            maxBackups: 30
                        };
                    } else if (!appData.settings.autoBackup.maxBackups) {
                        appData.settings.autoBackup.maxBackups = 30;
                    }

                    // Stelle sicher, dass das customParameters-Array existiert
                    if (!appData.customParameters) {
                        appData.customParameters = [];
                    }

                    // Stelle sicher, dass das savedSupplements-Array existiert
                    if (!appData.savedSupplements) {
                        appData.savedSupplements = [];
                    }

                    // Aktualisiere die Version
                    appData.version = APP_VERSION;

                    saveData();
                    updateUI();
                    showNotification('Backup erfolgreich wiederhergestellt!', 'success');
                } else {
                    showNotification('Backup nicht gefunden.', 'error');
                }
            } catch (error) {
                console.error('Fehler beim Wiederherstellen des Backups:', error);
                showNotification('Fehler beim Wiederherstellen des Backups.', 'error');
            }
        }

        // Backup l√∂schen
        function deleteBackup(backupId) {
            try {
                localStorage.removeItem(backupId);

                // Entferne das Backup aus der Historie
                backupHistory = backupHistory.filter(backup => backup.id !== backupId);
                saveBackupHistory();
                updateBackupHistory();

                showNotification('Backup erfolgreich gel√∂scht!', 'success');
            } catch (error) {
                console.error('Fehler beim L√∂schen des Backups:', error);
                showNotification('Fehler beim L√∂schen des Backups.', 'error');
            }
        }

        // Backup-Historie aktualisieren
        function updateBackupHistory() {
            const backupHistoryElement = document.getElementById('backupHistory');
            backupHistoryElement.innerHTML = '';

            if (backupHistory.length === 0) {
                const emptyItem = document.createElement('div');
                emptyItem.className = 'backup-item';
                emptyItem.innerHTML = '<span class="backup-date">Keine Backups vorhanden</span>';
                backupHistoryElement.appendChild(emptyItem);
                return;
            }

            backupHistory.forEach(backup => {
                const backupDate = new Date(backup.date);
                const formattedDate = backupDate.toLocaleDateString('de-DE', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });

                const backupItem = document.createElement('div');
                backupItem.className = 'backup-item';

                const badgeClass = backup.isAuto ? 'badge badge-auto' : 'badge badge-manual';
                const badgeText = backup.isAuto ? 'Auto' : 'Manuell';

                backupItem.innerHTML = `
                    <span class="backup-date">${formattedDate} <span class="${badgeClass}">${badgeText}</span></span>
                    <div>
                        <button class="restore-backup" data-id="${backup.id}">Wiederherstellen</button>
                        <button class="delete-backup" data-id="${backup.id}">L√∂schen</button>
                    </div>
                `;

                backupHistoryElement.appendChild(backupItem);
            });

            // Event-Listener f√ºr Backup-Aktionen
            document.querySelectorAll('.restore-backup').forEach(button => {
                button.addEventListener('click', () => {
                    const backupId = button.getAttribute('data-id');
                    if (confirm('M√∂chtest du dieses Backup wirklich wiederherstellen? Alle aktuellen Daten werden √ºberschrieben.')) {
                        restoreBackup(backupId);
                    }
                });
            });

            document.querySelectorAll('.delete-backup').forEach(button => {
                button.addEventListener('click', () => {
                    const backupId = button.getAttribute('data-id');
                    if (confirm('M√∂chtest du dieses Backup wirklich l√∂schen?')) {
                        deleteBackup(backupId);
                    }
                });
            });
        }

        // Daten als CSV exportieren
        function exportDataAsCsv() {
            // Sortiere Eintr√§ge nach Datum (neueste zuerst)
            const sortedEntries = [...appData.entries].sort((a, b) => {
                return new Date(b.date).getTime() - new Date(a.date).getTime();
            });

            // Sammle Header f√ºr benutzerdefinierte Parameter
            let customHeaders = appData.customParameters.map(param => param.name);

            // CSV-Header
            let csvContent = 'Datum,Periode,Temperatur,Zervixschleim,Brustgef√ºhl,Symptome,Notizen,Stimmung,Kopfschmerzen,Gewicht,Geschlechtsverkehr,Nahrungserg√§nzungsmittel,Medikamente';

            // F√ºge benutzerdefinierte Parameter zu den Headern hinzu
            if (customHeaders.length > 0) {
                csvContent += ',' + customHeaders.join(',');
            }

            csvContent += '\n';

            // F√ºge Zeilen hinzu
            sortedEntries.forEach(entry => {
                // Periodenintensit√§t
                let flowText = '';
                switch (entry.flow) {
                    case 'NONE': flowText = 'Keine'; break;
                    case 'SPOTTING': flowText = 'Spotting'; break;
                    case 'LIGHT': flowText = 'Leicht'; break;
                    case 'MEDIUM': flowText = 'Mittel'; break;
                    case 'HEAVY': flowText = 'Stark'; break;
                    default: flowText = '';
                }

                // Periode-St√§rke als Nummer
                let periodValue = entry.periodValue || '';

                // Temperatur
                let tempText = entry.temperature || '';

                // Zervixschleim
                let mucusText = '';
                switch (entry.cervicalMucus) {
                    case 'DRY': mucusText = 'Trocken'; break;
                    case 'STICKY': mucusText = 'Klebrig'; break;
                    case 'CREAMY': mucusText = 'Cremig'; break;
                    case 'WATERY': mucusText = 'W√§ssrig'; break;
                    case 'EGG_WHITE': mucusText = 'Spinnbar'; break;
                    default: mucusText = '';
                }

                // Brustgef√ºhl
                let breastText = '';
                switch (entry.breastFeeling) {
                    case 'NONE': breastText = 'Keine Beschwerden'; break;
                    case 'SENSITIVE': breastText = 'Empfindlich'; break;
                    case 'TENSE': breastText = 'Spannt'; break;
                    case 'PAINFUL': breastText = 'Schmerzt'; break;
                    case 'VERY_PAINFUL': breastText = 'Sehr schmerzhaft'; break;
                    default: breastText = '';
                }

                // Symptome
                const symptoms = entry.symptoms ? entry.symptoms.map(symptom => getSymptomName(symptom)).join(', ') : '';

                // Notizen (entferne Kommas und Zeilenumbr√ºche f√ºr CSV-Kompatibilit√§t)
                const notesText = entry.notes ? '"' + entry.notes.replace(/"/g, '""').replace(/\n/g, ' ') + '"' : '';

                // Stimmung
                const moodValue = entry.moodValue !== undefined ? entry.moodValue : '';

                // Kopfschmerzen
                const headacheValue = entry.headacheValue !== undefined ? entry.headacheValue : '';

                // Gewicht
                const weightValue = entry.weight || '';

                // Geschlechtsverkehr
                const intercourse = entry.intercourse ? 'Ja' : '';

                // Nahrungserg√§nzungsmittel
                const supplements = entry.supplements ? '"' + entry.supplements.join(', ').replace(/"/g, '""') + '"' : '';

                // Medikamente
                const medication = entry.medication ? '"' + entry.medication.replace(/"/g, '""').replace(/\n/g, ' ') + '"' : '';

                // Benutzerdefinierte Parameter-Werte
                let customValues = [];

                if (entry.customParameters) {
                    appData.customParameters.forEach(param => {
                        const value = entry.customParameters[param.id] !== undefined ? entry.customParameters[param.id] : '';

                        // Formatiere den Wert je nach Parametertyp
                        let formattedValue = '';

                        if (value !== '') {
                            if (param.type === 'boolean') {
                                formattedValue = value ? 'Ja' : 'Nein';
                            } else if (param.type === 'number' && param.unit) {
                                formattedValue = `${value} ${param.unit}`;
                            } else if (param.type === 'select' && param.options) {
                                const option = param.options.find(opt => opt.value === value);
                                formattedValue = option ? option.text : value;
                            } else {
                                formattedValue = value;
                            }
                        }

                        // F√ºge Anf√ºhrungszeichen hinzu, wenn der Wert Kommas enth√§lt
                        if (typeof formattedValue === 'string' && formattedValue.includes(',')) {
                            formattedValue = `"${formattedValue.replace(/"/g, '""')}"`;
                        }

                        customValues.push(formattedValue);
                    });
                }

                // F√ºge Zeile hinzu
                csvContent += `${entry.date},${flowText},${tempText},${mucusText},${breastText},${symptoms},${notesText},${moodValue},${headacheValue},${weightValue},${intercourse},${supplements},${medication}`;

                // F√ºge benutzerdefinierte Parameter-Werte hinzu
                if (customValues.length > 0) {
                    csvContent += ',' + customValues.join(',');
                }

                csvContent += '\n';
            });

            // Erstelle Blob und Download-Link
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);

            const a = document.createElement('a');
            a.href = url;
            a.download = `Zykli_export_${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            showNotification('Daten erfolgreich als CSV exportiert!', 'success');
        }

        // Zeige eine Benachrichtigung
        function showNotification(message, type = 'info') {
            const banner = document.getElementById('notificationBanner');
            const text = document.getElementById('notificationText');

            text.textContent = message;

            // Setze die Farben je nach Typ
            if (type === 'error') {
                banner.style.backgroundColor = '#f8d7da';
                banner.style.borderColor = '#f5c6cb';
                banner.style.color = '#721c24';
            } else if (type === 'success') {
                banner.style.backgroundColor = '#d4edda';
                banner.style.borderColor = '#c3e6cb';
                banner.style.color = '#155724';
            } else {
                banner.style.backgroundColor = '#fff3cd';
                banner.style.borderColor = '#ffeeba';
                banner.style.color = '#856404';
            }

            banner.classList.remove('hidden');

            // Automatisch nach 5 Sekunden ausblenden
            setTimeout(() => {
                banner.classList.add('hidden');
            }, 5000);
        }

        // Tabs-Funktionalit√§t
        function setupTabs() {
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Entferne aktive Klasse von allen Tabs
                    tabs.forEach(t => t.classList.remove('active'));
                    // F√ºge aktive Klasse zum geklickten Tab hinzu
                    tab.classList.add('active');

                    // Verstecke alle Tab-Inhalte
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });

                    // Zeige den entsprechenden Tab-Inhalt
                    const tabName = tab.getAttribute('data-tab');
                    document.getElementById(tabName).classList.add('active');

                    // Aktualisiere spezifische Inhalte f√ºr bestimmte Tabs
                    if (tabName === 'statistik') {
                        updateEntriesTable();
                    }
                });
            });
        }

        // Dialog-Funktionalit√§t f√ºr alle Dialoge
        function setupDialogs() {
            document.querySelectorAll('.form-dialog').forEach(dialog => {
                const closeBtn = dialog.querySelector('.dialog-close');

                // Schlie√üen durch Klick auf X
                if (closeBtn) {
                    closeBtn.addEventListener('click', () => {
                        dialog.style.display = 'none';
                    });
                }

                // Schlie√üen durch Klick au√üerhalb des Dialogs
                dialog.addEventListener('click', (event) => {
                    if (event.target === dialog) {
                        dialog.style.display = 'none';
                    }
                });
            });
        }

        // Dialog f√ºr einen bestimmten Parameter √∂ffnen
        function openDialog(dialogId, date) {
            // Aktuelles Datum f√ºr den Eintrag festlegen
            const dateString = date || currentQuestDate.toISOString().split('T')[0];

            // Finde existierenden Eintrag oder erstelle einen neuen
            currentEntry = appData.entries.find(entry => entry.date === dateString);

            if (!currentEntry) {
                currentEntry = {
                    date: dateString,
                    flow: 'NONE',
                    id: Date.now().toString()
                };
            }

            // Dialog-spezifische Vorbereitung
            switch (dialogId) {
                case 'periodDialog':
                    setupPeriodDialog();
                    break;
                case 'temperatureDialog':
                    setupTemperatureDialog();
                    break;
                case 'intercourseDialog':
                    setupIntercourseDialog();
                    break;
                case 'medicationDialog':
                    setupMedicationDialog();
                    break;
                case 'weightDialog':
                    setupWeightDialog();
                    break;
                case 'moodDialog':
                    setupMoodDialog();
                    break;
                case 'notesDialog':
                    setupNotesDialog();
                    break;
                case 'mucusDialog':
                    setupMucusDialog();
                    break;
                case 'painDialog':
                    setupPainDialog();
                    break;
                case 'supplementsDialog':
                    setupSupplementsDialog();
                    break;
                case 'breastDialog':
                    setupBreastDialog();
                    break;
            }

            // Dialog √∂ffnen
            document.getElementById(dialogId).style.display = 'flex';
        }

        // Blutstropfen-Regler f√ºr Menstruation
        function setupPeriodDialog() {
            const sliderThumb = document.getElementById('periodSliderThumb');
            const valueIndicator = document.getElementById('periodValue');
            const bloodDrop = document.getElementById('bloodDrop');
            const saveBtn = document.getElementById('savePeriodBtn');

            // Standardwert setzen
            let periodValue = currentEntry.periodValue || 0;

            // Vorhandenen Wert einstellen, falls vorhanden
            if (currentEntry.flow === 'SPOTTING') periodValue = 2;
            if (currentEntry.flow === 'LIGHT') periodValue = 4;
            if (currentEntry.flow === 'MEDIUM') periodValue = 7;
            if (currentEntry.flow === 'HEAVY') periodValue = 10;

            updatePeriodSlider(periodValue);

            // Funktionen f√ºr den Regler
            function updatePeriodSlider(value) {
                // Position des Reglers aktualisieren (0-100%)
                const position = (value / 10) * 100;
                sliderThumb.style.left = `${position}%`;

                // Wert-Anzeige aktualisieren
                valueIndicator.textContent = value;
                valueIndicator.style.left = `${position}%`;

                // Blutstropfen-Farbe anpassen
                const color = value === 0 ? '#ffcdd2' :
                             value <= 3 ? '#ef9a9a' :
                             value <= 6 ? '#e57373' :
                             value <= 8 ? '#ef5350' : '#c62828';

                bloodDrop.setAttribute('fill', color);

                // Blutstropfen-Gr√∂√üe anpassen
                const scale = 0.5 + (value / 10) * 0.5;
                bloodDrop.style.transform = `scale(${scale})`;
            }

            // Event-Listener f√ºr Klick/Touch auf die Schiene
            document.querySelector('.slider-track').addEventListener('click', function(e) {
                const trackRect = this.getBoundingClientRect();
                const position = (e.clientX - trackRect.left) / trackRect.width;
                const value = Math.round(position * 10);
                updatePeriodSlider(Math.max(0, Math.min(10, value)));
            });

            // Drag-Funktionalit√§t f√ºr den Schieberegler
            let isDragging = false;

            sliderThumb.addEventListener('mousedown', startDrag);
            sliderThumb.addEventListener('touchstart', startDrag);

            function startDrag(e) {
                e.preventDefault();
                isDragging = true;
                document.addEventListener('mousemove', onDrag);
                document.addEventListener('touchmove', onDrag);
                document.addEventListener('mouseup', stopDrag);
                document.addEventListener('touchend', stopDrag);
            }

            function onDrag(e) {
                if (!isDragging) return;

                const trackRect = document.querySelector('.slider-track').getBoundingClientRect();
                let clientX;

                if (e.type === 'touchmove') {
                    clientX = e.touches[0].clientX;
                } else {
                    clientX = e.clientX;
                }

                const position = (clientX - trackRect.left) / trackRect.width;
                const value = Math.round(position * 10);
                updatePeriodSlider(Math.max(0, Math.min(10, value)));
            }

            function stopDrag() {
                isDragging = false;
                document.removeEventListener('mousemove', onDrag);
                document.removeEventListener('touchmove', onDrag);
                document.removeEventListener('mouseup', stopDrag);
                document.removeEventListener('touchend', stopDrag);
            }

            // Speicher-Button
            saveBtn.addEventListener('click', function() {
                // Speichere Wert
                currentEntry.periodValue = parseInt(valueIndicator.textContent);

                // Setze entsprechenden Flow-Wert
                if (currentEntry.periodValue === 0) {
                    currentEntry.flow = 'NONE';
                } else if (currentEntry.periodValue <= 3) {
                    currentEntry.flow = 'SPOTTING';
                } else if (currentEntry.periodValue <= 5) {
                    currentEntry.flow = 'LIGHT';
                } else if (currentEntry.periodValue <= 8) {
                    currentEntry.flow = 'MEDIUM';
                } else {
                    currentEntry.flow = 'HEAVY';
                }

                // Speichere den Eintrag
                saveEntry(currentEntry);

                // Schlie√üe Dialog
                document.getElementById('periodDialog').style.display = 'none';
            });
        }

        // Vulva-Thermometer f√ºr Basaltemperatur
        function setupTemperatureDialog() {
            const slider = document.getElementById('temperatureSlider');
            const valueDisplay = document.getElementById('temperatureValue');
            const saveBtn = document.getElementById('saveTemperatureBtn');

            // Setze vorhandenen Wert, falls vorhanden
            slider.value = currentEntry.temperature || 36.5;
            valueDisplay.textContent = `${slider.value} ¬∞C`;

            // Event-Listener f√ºr Slider-√Ñnderungen
            slider.addEventListener('input', function() {
                valueDisplay.textContent = `${this.value} ¬∞C`;

                // √Ñndere Farbe der Vulva-Shape basierend auf Temperatur
                const vulvaShape = document.querySelector('.vulva-shape');
                const tempValue = parseFloat(this.value);

                if (tempValue < 36.2) {
                    vulvaShape.style.filter = 'hue-rotate(180deg)'; // k√ºhler
                } else if (tempValue > 37.2) {
                    vulvaShape.style.filter = 'hue-rotate(-30deg) saturate(2)'; // w√§rmer
                } else {
                    vulvaShape.style.filter = 'none'; // normal
                }
            });

            // Speichern-Button
            saveBtn.addEventListener('click', function() {
                currentEntry.temperature = parseFloat(slider.value);
                saveEntry(currentEntry);
                document.getElementById('temperatureDialog').style.display = 'none';
            });
        }

        // Geschlechtsverkehr mit Konfetti
        function setupIntercourseDialog() {
            const yesBtn = document.getElementById('intercourseYesBtn');
            const noBtn = document.getElementById('intercourseNoBtn');

            // Aktuellen Wert markieren, falls vorhanden
            if (currentEntry.intercourse) {
                yesBtn.style.backgroundColor = '#4caf50';
                noBtn.style.backgroundColor = '#6c757d';
            } else {
                yesBtn.style.backgroundColor = '#ff6b6b';
                noBtn.style.backgroundColor = '#6c757d';
            }

            // Event-Listener f√ºr die Buttons
            yesBtn.addEventListener('click', function() {
                // Markiere Button als ausgew√§hlt
                this.style.backgroundColor = '#4caf50';
                noBtn.style.backgroundColor = '#6c757d';

                // Konfetti-Animation
                showConfetti();

                // Speichere Wert
                currentEntry.intercourse = true;
                saveEntry(currentEntry);

                // Schlie√üe Dialog nach kurzer Verz√∂gerung (f√ºr die Konfetti-Animation)
                setTimeout(() => {
                    document.getElementById('intercourseDialog').style.display = 'none';
                }, 1500);
            });

            noBtn.addEventListener('click', function() {
                // Markiere Button als ausgew√§hlt
                this.style.backgroundColor = '#4caf50';
                yesBtn.style.backgroundColor = '#ff6b6b';

                // Speichere Wert
                currentEntry.intercourse = false;
                saveEntry(currentEntry);

                // Schlie√üe Dialog
                document.getElementById('intercourseDialog').style.display = 'none';
            });
        }

        // Konfetti-Animation
        function showConfetti() {
            const container = document.getElementById('confettiContainer');
            container.innerHTML = '';
            container.style.display = 'block';

            // Erstelle 100 Konfetti-St√ºcke
            for (let i = 0; i < 100; i++) {
                createConfettiPiece(container);
            }

            // Nach der Animation ausblenden
            setTimeout(() => {
                container.style.display = 'none';
            }, 5000);
        }

        function createConfettiPiece(container) {
            const confetti = document.createElement('div');
            confetti.className = 'confetti';

            // Zuf√§llige Eigenschaften
            const colors = ['#f44336', '#e91e63', '#9c27b0', '#673ab7', '#3f51b5', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#4caf50', '#8bc34a', '#cddc39'];
            const size = Math.random() * 10 + 5;
            const left = Math.random() * 100;
            const animationDuration = Math.random() * 3 + 2;
            const animationDelay = Math.random() * 2;

            // Form: Kreis, Quadrat oder Dreieck
            const shapes = ['circle', 'square', 'triangle'];
            const shape = shapes[Math.floor(Math.random() * shapes.length)];

            // Setze Style
            confetti.style.width = `${size}px`;
            confetti.style.height = `${size}px`;
            confetti.style.left = `${left}vw`;
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.animationDuration = `${animationDuration}s`;
            confetti.style.animationDelay = `${animationDelay}s`;

            if (shape === 'circle') {
                confetti.style.borderRadius = '50%';
            } else if (shape === 'triangle') {
                confetti.style.width = '0';
                confetti.style.height = '0';
                confetti.style.backgroundColor = 'transparent';
                confetti.style.borderLeft = `${size/2}px solid transparent`;
                confetti.style.borderRight = `${size/2}px solid transparent`;
                confetti.style.borderBottom = `${size}px solid ${colors[Math.floor(Math.random() * colors.length)]}`;
            }

            container.appendChild(confetti);
        }

        // Medikamente Textfeld
        function setupMedicationDialog() {
            const textArea = document.getElementById('medicationText');
            const saveBtn = document.getElementById('saveMedicationBtn');

            // Setze vorhandenen Wert
            textArea.value = currentEntry.medication || '';

            // Speichern-Button
            saveBtn.addEventListener('click', function() {
                currentEntry.medication = textArea.value;
                saveEntry(currentEntry);
                document.getElementById('medicationDialog').style.display = 'none';
            });
        }

        // Gewicht-Eingabe
        function setupWeightDialog() {
            const input = document.getElementById('weightInput');
            const saveBtn = document.getElementById('saveWeightBtn');

            // Setze vorhandenen Wert
            input.value = currentEntry.weight || '';

            // Speichern-Button
            saveBtn.addEventListener('click', function() {
                const weight = parseFloat(input.value);
                if (isNaN(weight)) {
                    showNotification('Bitte gib ein g√ºltiges Gewicht ein.', 'error');
                    return;
                }

                if (weight < 30 || weight > 200) {
                    showNotification('Bitte gib ein Gewicht zwischen 30 und 200 kg ein.', 'error');
                    return;
                }

                currentEntry.weight = weight;
                saveEntry(currentEntry);
                document.getElementById('weightDialog').style.display = 'none';
            });
        }

        // Stimmungs-Smiley
        function setupMoodDialog() {
            const slider = document.getElementById('moodSlider');
            const mouthShape = document.getElementById('mouthShape');
            const saveBtn = document.getElementById('saveMoodBtn');

            // Setze vorhandenen Wert
            slider.value = currentEntry.moodValue !== undefined ? currentEntry.moodValue : 5;
            updateMouthShape(slider.value);

            // Event-Listener f√ºr Slider-√Ñnderungen
            slider.addEventListener('input', function() {
                updateMouthShape(this.value);
            });

            function updateMouthShape(value) {
                // Berechne Mundwinkel-Drehung basierend auf Stimmung
                // 0 = sehr traurig (180¬∞ Drehung) bis 9 = super gl√ºcklich (0¬∞ Drehung)
                const rotation = 180 - (value / 9 * 180);
                mouthShape.style.transform = `rotate(${rotation}deg)`;

                // √Ñndere Farbe des Smileys
                const smiley = document.querySelector('.mood-smiley');
                if (value <= 3) {
                    smiley.style.backgroundColor = '#ffcdd2'; // traurig
                } else if (value <= 6) {
                    smiley.style.backgroundColor = '#ffeb3b'; // neutral
                } else {
                    smiley.style.backgroundColor = '#aed581'; // gl√ºcklich
                }
            }

            // Speichern-Button
            saveBtn.addEventListener('click', function() {
                currentEntry.moodValue = parseInt(slider.value);
                saveEntry(currentEntry);
                document.getElementById('moodDialog').style.display = 'none';
            });
        }

        // Tagebuch mit Hasen-Animation
        function setupNotesDialog() {
            const textArea = document.getElementById('notesText');
            const saveBtn = document.getElementById('saveNotesBtn');

            // Setze vorhandenen Wert
            textArea.value = currentEntry.notes || '';

            // Speichern-Button
            saveBtn.addEventListener('click', function() {
                currentEntry.notes = textArea.value;
                saveEntry(currentEntry);
                document.getElementById('notesDialog').style.display = 'none';
            });
        }

        // Zervixschleim-Auswahl
        function setupMucusDialog() {
            const options = document.querySelectorAll('.mucus-option');
            const saveBtn = document.getElementById('saveMucusBtn');

            // Entferne aktive Klasse von allen Optionen
            options.forEach(option => option.classList.remove('selected'));

            // Setze vorhandene Auswahl, falls vorhanden
            if (currentEntry.cervicalMucus) {
                const selectedOption = document.querySelector(`.mucus-option[data-value="${currentEntry.cervicalMucus}"]`);
                if (selectedOption) {
                    selectedOption.classList.add('selected');
                }
            }

            // Event-Listener f√ºr Optionen
            options.forEach(option => {
                option.addEventListener('click', function() {
                    // Entferne Auswahl von allen Optionen
                    options.forEach(opt => opt.classList.remove('selected'));

                    // Markiere aktuelle Option
                    this.classList.add('selected');
                });
            });

            // Speichern-Button
            saveBtn.addEventListener('click', function() {
                const selectedOption = document.querySelector('.mucus-option.selected');

                if (selectedOption) {
                    currentEntry.cervicalMucus = selectedOption.getAttribute('data-value');
                } else {
                    currentEntry.cervicalMucus = null;
                }

                saveEntry(currentEntry);
                document.getElementById('mucusDialog').style.display = 'none';
            });
        }

        // Kopfschmerzen mit Specht-Animation
        function setupPainDialog() {
            const slider = document.getElementById('headacheSlider');
            const valueDisplay = document.getElementById('headacheValue');
            const saveBtn = document.getElementById('savePainBtn');
            const woodpecker = document.getElementById('woodpecker');

            // Setze vorhandenen Wert
            slider.value = currentEntry.headacheValue !== undefined ? currentEntry.headacheValue : 0;
            updateHeadacheDisplay(slider.value);

            // Event-Listener f√ºr Slider-√Ñnderungen
            slider.addEventListener('input', function() {
                updateHeadacheDisplay(this.value);
            });

            function updateHeadacheDisplay(value) {
                // Aktualisiere Text-Anzeige
                let intensityText;

                if (value == 0) intensityText = "0 - Keine Schmerzen";
                else if (value <= 2) intensityText = value + " - Leichte Schmerzen";
                else if (value <= 5) intensityText = value + " - M√§√üige Schmerzen";
                else if (value <= 8) intensityText = value + " - Starke Schmerzen";
                else intensityText = value + " - Extreme Schmerzen";

                valueDisplay.textContent = intensityText;

                // Aktualisiere Animation-Geschwindigkeit
                const animDuration = value == 0 ? 0 : 1 - (value / 15); // Je h√∂her der Wert, desto schneller
                woodpecker.style.animationDuration = animDuration + 's';

                // Aktualisiere Ballonkopf-Farbe
                const balloon = document.querySelector('.balloon-head');

                if (value == 0) {
                    balloon.style.backgroundColor = '#ffcdd2';
                } else if (value <= 3) {
                    balloon.style.backgroundColor = '#ef9a9a';
                } else if (value <= 6) {
                    balloon.style.backgroundColor = '#e57373';
                } else if (value <= 8) {
                    balloon.style.backgroundColor = '#ef5350';
                } else {
                    balloon.style.backgroundColor = '#c62828';
                }

                // Verstecke/zeige Specht je nach Intensit√§t
                if (value == 0) {
                    woodpecker.style.display = 'none';
                } else {
                    woodpecker.style.display = 'block';
                }
            }

            // Speichern-Button
            saveBtn.addEventListener('click', function() {
                currentEntry.headacheValue = parseInt(slider.value);
                saveEntry(currentEntry);
                document.getElementById('painDialog').style.display = 'none';
            });
        }

        // Nahrungserg√§nzungsmittel-Liste
        function setupSupplementsDialog() {
            const input = document.getElementById('supplementInput');
            const addBtn = document.getElementById('addSupplementBtn');
            const listContainer = document.getElementById('supplementsList');
            const saveBtn = document.getElementById('saveSupplementsBtn');

            // Aktuelle Supplements
            let currentSupplements = currentEntry.supplements || [];

            // Zeige gespeicherte Supplements an
            function updateSupplementsList() {
                listContainer.innerHTML = '';

                if (currentSupplements.length === 0) {
                    listContainer.innerHTML = '<div style="text-align: center; color: #666; padding: 20px;">Keine Nahrungserg√§nzungsmittel eingetragen</div>';
                    return;
                }

                currentSupplements.forEach((supplement, index) => {
                    const item = document.createElement('div');
                    item.className = 'grocery-item';

                    item.innerHTML = `
                        <span>${supplement}</span>
                        <button type="button" data-index="${index}" class="remove-supplement">√ó</button>
                    `;

                    listContainer.appendChild(item);
                });

                // Event-Listener f√ºr Entfernen-Buttons
                document.querySelectorAll('.remove-supplement').forEach(button => {
                    button.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        currentSupplements.splice(index, 1);
                        updateSupplementsList();
                    });
                });
            }

            // Initialisiere Liste
            updateSupplementsList();

            // Hinzuf√ºgen-Button
            addBtn.addEventListener('click', function() {
                const supplementText = input.value.trim();

                if (supplementText) {
                    // F√ºge zur aktuellen Liste hinzu
                    currentSupplements.push(supplementText);

                    // F√ºge zur globalen Liste hinzu, wenn noch nicht vorhanden
                    if (!appData.savedSupplements.includes(supplementText)) {
                        appData.savedSupplements.push(supplementText);
                    }

                    // Aktualisiere Listen
                    updateSupplementsList();

                    // Leere Eingabefeld
                    input.value = '';
                }
            });

            // Autocomplete f√ºr h√§ufig verwendete Supplemente
            if (appData.savedSupplements && appData.savedSupplements.length > 0) {
                // Erstelle Datalist f√ºr Autocomplete
                const datalist = document.createElement('datalist');
                datalist.id = 'savedSupplements';

                appData.savedSupplements.forEach(supplement => {
                    const option = document.createElement('option');
                    option.value = supplement;
                    datalist.appendChild(option);
                });

                document.body.appendChild(datalist);
                input.setAttribute('list', 'savedSupplements');
            }

            // Speichern-Button
            saveBtn.addEventListener('click', function() {
                currentEntry.supplements = [...currentSupplements];
                saveEntry(currentEntry);
                document.getElementById('supplementsDialog').style.display = 'none';
            });
        }

        // Brustgef√ºhl-Dialog
        function setupBreastDialog() {
            const saveBtn = document.getElementById('saveBreastBtn');

            // Setze vorhandenen Wert
            if (currentEntry.breastFeeling) {
                document.getElementById(`breast-${currentEntry.breastFeeling.toLowerCase()}`).checked = true;
            } else {
                document.getElementById('breast-none').checked = true;
            }

            // Speichern-Button
            saveBtn.addEventListener('click', function() {
                const selectedOption = document.querySelector('input[name="breastFeeling"]:checked');

                if (selectedOption) {
                    currentEntry.breastFeeling = selectedOption.value;
                } else {
                    currentEntry.breastFeeling = null;
                }

                saveEntry(currentEntry);
                document.getElementById('breastDialog').style.display = 'none';
            });
        }

        // Speichere einen Eintrag
        function saveEntry(entry) {
            // Pr√ºfe, ob bereits ein Eintrag f√ºr dieses Datum existiert
            const existingEntryIndex = appData.entries.findIndex(e => e.date === entry.date);

            if (existingEntryIndex !== -1) {
                // Aktualisiere den bestehenden Eintrag
                appData.entries[existingEntryIndex] = { ...appData.entries[existingEntryIndex], ...entry };

                // Pr√ºfe, ob ein Periodeneintrag hinzugef√ºgt oder entfernt wurde
                if ((appData.entries[existingEntryIndex].flow === 'NONE' && entry.flow !== 'NONE') ||
                    (appData.entries[existingEntryIndex].flow !== 'NONE' && entry.flow === 'NONE')) {
                    // Neuberechnung der Zyklen k√∂nnte erforderlich sein
                    recalculateCycles();
                }
            } else {
                // F√ºge einen neuen Eintrag hinzu
                addEntry(entry);
            }

            // Speichere die Daten
            saveData();

            // UI aktualisieren
            updateUI();

            // Best√§tigungsmeldung
            showNotification('Eintrag gespeichert!', 'success');
        }

        // Tabellarische √úbersicht der Eintr√§ge
        function updateEntriesTable() {
            const tableBody = document.querySelector('#entriesTable tbody');
            tableBody.innerHTML = '';

            // Sortiere Eintr√§ge nach Datum (neueste zuerst)
            const sortedEntries = [...appData.entries].sort((a, b) => {
                return new Date(b.date).getTime() - new Date(a.date).getTime();
            });

            // Paginierung einrichten
            const itemsPerPage = 10;
            const totalPages = Math.ceil(sortedEntries.length / itemsPerPage);
            let currentPage = 1;

            function displayPage(page) {
                // Leere die Tabelle
                tableBody.innerHTML = '';

                // Berechne den Startindex
                const startIndex = (page - 1) * itemsPerPage;
                // Berechne den Endindex
                const endIndex = Math.min(startIndex + itemsPerPage, sortedEntries.length);

                // Zeige Eintr√§ge der aktuellen Seite
                for (let i = startIndex; i < endIndex; i++) {
                    const entry = sortedEntries[i];
                    const row = document.createElement('tr');

                    // Formatiere das Datum
                    const dateObj = new Date(entry.date);
                    const formattedDate = dateObj.toLocaleDateString('de-DE');

                    // Periodenintensit√§t
                    let flowText = '';
                    switch (entry.flow) {
                        case 'NONE': flowText = 'Keine'; break;
                        case 'SPOTTING': flowText = 'Spotting'; break;
                        case 'LIGHT': flowText = 'Leicht'; break;
                        case 'MEDIUM': flowText = 'Mittel'; break;
                        case 'HEAVY': flowText = 'Stark'; break;
                        default: flowText = '';
                    }

                    // Temperatur
                    const tempText = entry.temperature ? `${entry.temperature} ¬∞C` : '-';

                    // Symptome
                    const symptoms = [];
                    if (entry.symptoms && entry.symptoms.length > 0) {
                        entry.symptoms.forEach(symptom => {
                            symptoms.push(getSymptomName(symptom));
                        });
                    }

                    // Kopfschmerzen
                    if (entry.headacheValue > 0) {
                        symptoms.push(`Kopfschmerzen (${entry.headacheValue}/10)`);
                    }

                    // Stimmung
                    if (entry.moodValue !== undefined) {
                        const moodLabel = entry.moodValue <= 3 ? 'Schlecht' :
                                        entry.moodValue <= 6 ? 'Mittelm√§√üig' : 'Gut';
                        symptoms.push(`Stimmung: ${moodLabel}`);
                    }

                    const symptomsText = symptoms.length > 0 ? symptoms.join(', ') : '-';

                    // Benutzerdefinierte Parameter
                    let customParamsText = [];

                    // Gewicht
                    if (entry.weight) {
                        customParamsText.push(`Gewicht: ${entry.weight} kg`);
                    }

                    // Geschlechtsverkehr
                    if (entry.intercourse) {
                        customParamsText.push('Geschlechtsverkehr: Ja');
                    }

                    // Nahrungserg√§nzungsmittel
                    if (entry.supplements && entry.supplements.length > 0) {
                        customParamsText.push(`Supplemente: ${entry.supplements.length}`);
                    }

                    // Benutzerdefinierte Parameter
                    if (entry.customParameters && Object.keys(entry.customParameters).length > 0) {
                        Object.entries(entry.customParameters).forEach(([paramId, value]) => {
                            const parameter = appData.customParameters.find(p => p.id === paramId);

                            if (parameter) {
                                let formattedValue;

                                if (parameter.type === 'boolean') {
                                    formattedValue = value ? 'Ja' : 'Nein';
                                } else if (parameter.type === 'number' && parameter.unit) {
                                    formattedValue = `${value} ${parameter.unit}`;
                                } else if (parameter.type === 'select' && parameter.options) {
                                    const option = parameter.options.find(opt => opt.value === value);
                                    formattedValue = option ? option.text : value;
                                } else {
                                    formattedValue = value;
                                }

                                customParamsText.push(`${parameter.name}: ${formattedValue}`);
                            }
                        });
                    }

                    const customText = customParamsText.length > 0 ? customParamsText.join(', ') : '-';

                    row.innerHTML = `
                        <td>${formattedDate}</td>
                        <td>${flowText}</td>
                        <td>${tempText}</td>
                        <td>${symptomsText}</td>
                        <td>${customText}</td>
                    `;

                    // F√ºge Klick-Ereignis hinzu, um den Tag zu √∂ffnen
                    row.addEventListener('click', () => {
                        // Setze das aktuelle Quest-Datum
                        currentQuestDate = new Date(entry.date);
                        updateQuestDate();

                        // Wechsle zum "Heute"-Tab
                        document.querySelector('.tab[data-tab="heute"]').click();
                    });
                    row.style.cursor = 'pointer';

                    tableBody.appendChild(row);
                }

                // Aktualisiere die Paginierung
                updatePagination();
            }

            function updatePagination() {
                const paginationElement = document.getElementById('entriesPagination');
                paginationElement.innerHTML = '';

                if (totalPages <= 1) {
                    return;
                }

                // Zur√ºck-Button
                const prevButton = document.createElement('button');
                prevButton.textContent = '¬´';
                prevButton.disabled = currentPage === 1;
                prevButton.addEventListener('click', () => {
                    if (currentPage > 1) {
                        currentPage--;
                        displayPage(currentPage);
                    }
                });
                paginationElement.appendChild(prevButton);

                // Seitenzahlen
                for (let i = 1; i <= totalPages; i++) {
                    // Zeige nur 3 Seiten um die aktuelle Seite herum
                    if (
                        i === 1 ||
                        i === totalPages ||
                        (i >= currentPage - 1 && i <= currentPage + 1)
                    ) {
                        const pageButton = document.createElement('button');
                        pageButton.textContent = i;
                        pageButton.classList.toggle('active', i === currentPage);
                        pageButton.addEventListener('click', () => {
                            currentPage = i;
                            displayPage(currentPage);
                        });
                        paginationElement.appendChild(pageButton);
                    } else if (
                        (i === currentPage - 2 && currentPage > 3) ||
                        (i === currentPage + 2 && currentPage < totalPages - 2)
                    ) {
                        // F√ºge Auslassungspunkte hinzu
                        const ellipsis = document.createElement('span');
                        ellipsis.textContent = '...';
                        ellipsis.style.margin = '0 5px';
                        paginationElement.appendChild(ellipsis);
                    }
                }

                // Weiter-Button
                const nextButton = document.createElement('button');
                nextButton.textContent = '¬ª';
                nextButton.disabled = currentPage === totalPages;
                nextButton.addEventListener('click', () => {
                    if (currentPage < totalPages) {
                        currentPage++;
                        displayPage(currentPage);
                    }
                });
                paginationElement.appendChild(nextButton);
            }

            // Zeige die erste Seite
            displayPage(currentPage);
        }

        // Funktion zum Hinzuf√ºgen eines neuen Eintrags
        function addEntry(entry) {
            // F√ºge die Eintrag-ID hinzu, falls nicht vorhanden
            if (!entry.id) {
                entry.id = Date.now().toString();
            }

            // Pr√ºfe, ob die Periode beginnt
            const isNewPeriod = entry.flow !== 'NONE' && !isInPeriod(entry.date);

            // Wenn eine neue Periode beginnt, erstelle einen neuen Zyklus
            if (isNewPeriod) {
                const lastCycle = appData.cycles.length > 0 ? appData.cycles[0] : null;

                // Neuer Zyklus
                const newCycle = {
                    id: Date.now().toString(),
                    startDate: entry.date,
                    endDate: null // Wird sp√§ter aktualisiert, wenn der n√§chste Zyklus beginnt
                };

                // Schlie√üe den letzten Zyklus ab, wenn vorhanden
                if (lastCycle) {
                    lastCycle.endDate = new Date(new Date(entry.date).getTime() - 86400000).toISOString().split('T')[0]; // Einen Tag vor dem neuen Zyklusstart
                }

                // F√ºge den neuen Zyklus hinzu
                appData.cycles.unshift(newCycle);
            }

            // Speichere den Eintrag
            appData.entries.unshift(entry);

            // Speichere die aktualisierten Daten
            saveData();

            // UI aktualisieren
            updateUI();
        }

        // Pr√ºfe, ob ein Datum in einer Periode liegt
        function isInPeriod(date) {
            const dateObj = new Date(date);

            // Pr√ºfe alle Eintr√§ge
            for (const entry of appData.entries) {
                if (entry.flow !== 'NONE') {
                    const entryDate = new Date(entry.date);

                    // Wenn das Datum innerhalb von 7 Tagen nach einem Periodeneintrag liegt,
                    // betrachten wir es als Teil der gleichen Periode
                    const diffTime = Math.abs(dateObj - entryDate);
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                    if (diffDays <= 7 && dateObj >= entryDate) {
                        return true;
                    }
                }
            }

            return false;
        }

        // Aktualisiere das Datum f√ºr die t√§gliche Quest
        function updateQuestDate() {
            const dateElement = document.getElementById('questDate');
            const dayElement = document.getElementById('questDay');

            const options = { day: '2-digit', month: 'long', year: 'numeric' };
            dateElement.textContent = currentQuestDate.toLocaleDateString('de-DE', options);
            dayElement.textContent = currentQuestDate.toLocaleDateString('de-DE', { weekday: 'long' });

            // Pr√ºfe, ob es f√ºr dieses Datum Eintr√§ge gibt
            const dateString = currentQuestDate.toISOString().split('T')[0];
            const existingEntry = appData.entries.find(entry => entry.date === dateString);

            // Aktualisiere die visuellen Indikatoren in den Quest-Items
            updateQuestItemIndicators(existingEntry);
        }

        // Aktualisiere die Indikatoren in den Quest-Items basierend auf den vorhandenen Daten
        function updateQuestItemIndicators(entry) {
            // Zur√ºcksetzen aller Indikatoren
            document.querySelectorAll('.quest-item').forEach(item => {
                item.style.backgroundColor = '#f8f8f8';
            });

            if (!entry) return;

            // Periode
            if (entry.flow !== 'NONE') {
                document.querySelector('[data-type="period"]').style.backgroundColor = '#ffe6e6';
            }

            // Temperatur
            if (entry.temperature) {
                document.querySelector('[data-type="temperature"]').style.backgroundColor = '#fff2e6';
            }

            // Schleim
            if (entry.cervicalMucus) {
                document.querySelector('[data-type="mucus"]').style.backgroundColor = '#e6f7ff';
            }

            // Brustgef√ºhl
            if (entry.breastFeeling) {
                document.querySelector('[data-type="breast"]').style.backgroundColor = '#ffe6f2';
            }

            // Kopfschmerzen
            if (entry.headacheValue > 0) {
                document.querySelector('[data-type="pain"]').style.backgroundColor = '#ffe6eb';
            }

            // Stimmung
            if (entry.moodValue !== undefined) {
                document.querySelector('[data-type="mood"]').style.backgroundColor = '#e6ecff';
            }

            // Gewicht
            if (entry.weight) {
                document.querySelector('[data-type="weight"]').style.backgroundColor = '#e6f7ff';
            }

            // Geschlechtsverkehr
            if (entry.intercourse) {
                document.querySelector('[data-type="intercourse"]').style.backgroundColor = '#ffe6f2';
            }

            // Nahrungserg√§nzungsmittel
            if (entry.supplements && entry.supplements.length > 0) {
                document.querySelector('[data-type="supplements"]').style.backgroundColor = '#e6ffed';
            }

            // Medikamente
            if (entry.medication && entry.medication.trim() !== '') {
                document.querySelector('[data-type="medication"]').style.backgroundColor = '#fff2e6';
            }

            // Notizen
            if (entry.notes && entry.notes.trim() !== '') {
                document.querySelector('[data-type="notes"]').style.backgroundColor = '#f2f2f2';
            }
        }

        // Setup der t√§glichen Quest
        function setupDailyQuest() {
            // Setze das aktuelle Datum
            updateQuestDate();

            // Navigation zwischen Tagen
            document.getElementById('prevDay').addEventListener('click', () => {
                currentQuestDate.setDate(currentQuestDate.getDate() - 1);
                updateQuestDate();
            });

            document.getElementById('nextDay').addEventListener('click', () => {
                currentQuestDate.setDate(currentQuestDate.getDate() + 1);
                updateQuestDate();
            });

            // Event-Listener f√ºr Quest-Items
            document.querySelectorAll('.quest-item').forEach(item => {
                item.addEventListener('click', () => {
                    const type = item.getAttribute('data-type');
                    const dateString = currentQuestDate.toISOString().split('T')[0];

                    // √ñffne den entsprechenden Dialog
                    switch (type) {
                        case 'period':
                            openDialog('periodDialog', dateString);
                            break;
                        case 'temperature':
                            openDialog('temperatureDialog', dateString);
                            break;
                        case 'mucus':
                            openDialog('mucusDialog', dateString);
                            break;
                        case 'intercourse':
                            openDialog('intercourseDialog', dateString);
                            break;
                        case 'supplements':
                            openDialog('supplementsDialog', dateString);
                            break;
                        case 'medication':
                            openDialog('medicationDialog', dateString);
                            break;
                        case 'mood':
                            openDialog('moodDialog', dateString);
                            break;
                        case 'pain':
                            openDialog('painDialog', dateString);
                            break;
                        case 'weight':
                            openDialog('weightDialog', dateString);
                            break;
                        case 'notes':
                            openDialog('notesDialog', dateString);
                            break;
                        case 'breast':
                            openDialog('breastDialog', dateString);
                            break;
                    }
                });
            });
        }

        // Symptom-IDs in lesbare Namen umwandeln
        function getSymptomName(symptomId) {
            const symptomNames = {
                'HEADACHE': 'Kopfschmerzen',
                'CRAMPS': 'Kr√§mpfe',
                'BACKACHE': 'R√ºckenschmerzen',
                'FATIGUE': 'M√ºdigkeit',
                'BLOATING': 'Bl√§hungen',
                'MOOD': 'Stimmungsschwankungen'
            };

            return symptomNames[symptomId] || symptomId;
        }

        // Neuberechnung der Zyklen basierend auf den Periodeneintr√§gen
        function recalculateCycles() {
            // Sortiere Eintr√§ge nach Datum
            const sortedEntries = [...appData.entries].sort((a, b) => {
                return new Date(a.date).getTime() - new Date(b.date).getTime();
            });

            // Finde alle Periodeneintr√§ge
            const periodEntries = sortedEntries.filter(entry => entry.flow !== 'NONE');

            if (periodEntries.length === 0) {
                return;
            }

            // Gruppiere Periodeneintr√§ge nach Perioden
            const periods = [];
            let currentPeriod = [periodEntries[0]];

            for (let i = 1; i < periodEntries.length; i++) {
                const prevEntry = periodEntries[i - 1];
                const currentEntry = periodEntries[i];

                const prevDate = new Date(prevEntry.date);
                const currentDate = new Date(currentEntry.date);

                const diffTime = Math.abs(currentDate - prevDate);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

                if (diffDays <= 7) {
                    // Geh√∂rt zur gleichen Periode
                    currentPeriod.push(currentEntry);
                } else {
                    // Neue Periode beginnt
                    periods.push(currentPeriod);
                    currentPeriod = [currentEntry];
                }
            }

            if (currentPeriod.length > 0) {
                periods.push(currentPeriod);
            }

            // Erstelle Zyklen basierend auf den Perioden
            appData.cycles = [];

            for (let i = 0; i < periods.length; i++) {
                const period = periods[i];
                const startDate = period[0].date;

                const cycle = {
                    id: `cycle-${i}`,
                    startDate,
                    endDate: null
                };

                if (i < periods.length - 1) {
                    const nextPeriodStart = periods[i + 1][0].date;
                    const endDate = new Date(nextPeriodStart);
                    endDate.setDate(endDate.getDate() - 1);
                    cycle.endDate = endDate.toISOString().split('T')[0];
                }

                appData.cycles.push(cycle);
            }

            // Sortiere Zyklen nach Startdatum (neueste zuerst)
            appData.cycles.sort((a, b) => {
                return new Date(b.startDate).getTime() - new Date(a.startDate).getTime();
            });
        }

        // Aktualisiere die UI
        function updateUI() {
            updateQuestDate();
            updateEntriesTable();
        }

        // Zeige eine Benachrichtigung
        function showNotification(message, type = 'info') {
            const banner = document.getElementById('notificationBanner');
            const text = document.getElementById('notificationText');

            text.textContent = message;

            // Setze die Farben je nach Typ
            if (type === 'error') {
                banner.style.backgroundColor = '#f8d7da';
                banner.style.borderColor = '#f5c6cb';
                banner.style.color = '#721c24';
            } else if (type === 'success') {
                banner.style.backgroundColor = '#d4edda';
                banner.style.borderColor = '#c3e6cb';
                banner.style.color = '#155724';
            } else {
                banner.style.backgroundColor = '#fff3cd';
                banner.style.borderColor = '#ffeeba';
                banner.style.color = '#856404';
            }

            banner.classList.remove('hidden');

            // Automatisch nach 5 Sekunden ausblenden
            setTimeout(() => {
                banner.classList.add('hidden');
            }, 5000);
        }

        // Initialisierung
        function init() {
            loadData();
            setupTabs();
            setupDialogs();
            setupDailyQuest();
            updateUI();
        }

        // Starte die App
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>